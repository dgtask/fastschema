"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{57654:function(e,n,t){t.d(n,{z:function(){return a}});var r=t(57437),o=t(79580),i=t(575);let a=(0,t(2265).forwardRef)((e,n)=>{let{loading:t,icon:a,children:l,disabled:c,...u}=e,d={type:"button",size:"sm",...u};return t?(0,r.jsxs)(i.z,{...d,ref:n,disabled:c||t,children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),l]}):(0,r.jsx)(i.z,{...d,ref:n,disabled:c||t,children:a?(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[a,l]}):l})});a.displayName="Button"},18157:function(e,n,t){t.d(n,{EC:function(){return o},l:function(){return i},mb:function(){return a}});var r=t(31548);let o=e=>(null==e?void 0:e.type)==="m2m"||(null==e?void 0:e.type)==="o2m"&&!!(null==e?void 0:e.owner),i=(e,n,t,r,o,i)=>{if(!r){if(e.length){t(e[0]);return}if(!e.length&&n.length){t(o?null:void 0);return}t(o?null:void 0);return}let a=e.map(e=>({id:e.id})),l=a.length?a:void 0,c=n.map(e=>({id:e.id})),u=c.length?c:void 0,d=(null==l?void 0:l.length)||!o?l:null;t(i?{$add:l,$clear:u}:d)},a=async(e,n,t,o,i)=>{if(!o||!e.relation)return;let a={};if(n&&(a[o.label_field]={$like:"%".concat(n,"%")}),i){let n=e.relation.field;a["".concat(n,".id")]=i}return await (0,r.Q7)(o.name,{page:t,limit:20,filter:Object.keys(a).length?a:void 0,select:"id,".concat(o.label_field)})}},575:function(e,n,t){t.d(n,{d:function(){return c},z:function(){return u}});var r=t(57437),o=t(2265),i=t(59143),a=t(57742),l=t(22169);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((e,n)=>{let{className:t,variant:o,size:a,asChild:u=!1,...d}=e,s=u?i.g7:"button";return(0,r.jsx)(s,{className:(0,l.cn)(c({variant:o,size:a,className:t})),ref:n,...d})});u.displayName="Button"},31548:function(e,n,t){t.d(n,{Q7:function(){return l},Vj:function(){return i},il:function(){return c},rP:function(){return a},yd:function(){return u}});var r=t(18157),o=t(84971);let i=async(e,n,t)=>{let i={$add:{},$set:{},$clear:{}};for(let o of e.fields)if(o.name in n||o.is_system_field){if("relation"===o.type||"file"===o.type){var a,l;if(t){if(null===n[o.name]){i.$clear[o.name]=!0;continue}if(n[o.name].$nochange)continue;if(!(0,r.EC)(o.relation)){i.$set[o.name]=n[o.name];continue}n[o.name].$add&&(i.$add[o.name]=n[o.name].$add),n[o.name].$clear&&(i.$clear[o.name]=n[o.name].$clear);continue}if(null==n?void 0:null===(a=n[o.name])||void 0===a?void 0:a.$add){i[o.name]=n[o.name].$add;continue}if(null==n?void 0:null===(l=n[o.name])||void 0===l?void 0:l.$clear){delete i[o.name];continue}}i[o.name]=n[o.name]}return 0===Object.keys(i.$add).length&&delete i.$add,0===Object.keys(i.$set).length&&delete i.$set,0===Object.keys(i.$clear).length&&delete i.$clear,t?await (0,o.qb)("/content/".concat(e.name,"/").concat(t),i):await (0,o.SO)("/content/".concat(e.name),i)},a=e=>{let n={};return(null==e?void 0:e.limit)&&(n.limit=e.limit),(null==e?void 0:e.page)&&(n.page=e.page),(null==e?void 0:e.sort)&&(n.sort=e.sort),(null==e?void 0:e.select)&&(n.select=e.select),(null==e?void 0:e.filter)&&(n.filter=JSON.stringify(e.filter)),new URLSearchParams(n).toString()},l=async(e,n)=>{if(!e)throw Error("Schema name is required");let t={};(null==n?void 0:n.limit)&&(t.limit=n.limit),(null==n?void 0:n.page)&&(t.page=n.page),(null==n?void 0:n.sort)&&(t.sort=n.sort),(null==n?void 0:n.select)&&(t.select=n.select),(null==n?void 0:n.filter)&&(t.filter=JSON.stringify(n.filter));let r=Object.keys(t).length>0?"?"+a(n):"";return(0,o.dX)("/content/".concat(e).concat(r))},c=async(e,n,t)=>{let r=(null==t?void 0:t.length)?"?select=".concat(t.join(",")):"";return(0,o.dX)("/content/".concat(e.name,"/").concat(n).concat(r))},u=async(e,n)=>(0,o.HG)("/content/".concat(e,"/").concat(n))},79984:function(e,n,t){t.d(n,{Hz:function(){return f},Il:function(){return a},JT:function(){return u},MG:function(){return l},Qk:function(){return c},Vo:function(){return d},_8:function(){return i},aF:function(){return s}});var r=t(2265),o=t(18157);let i={appConfig:{menus:[],schemas:[]},setAppConfig:()=>null,reloadAppConfig:()=>Promise.resolve()},a=(0,r.createContext)(i),l=()=>(0,r.useContext)(a).appConfig,c=()=>(0,r.useContext)(a).appConfig.schemas,u=e=>(0,r.useContext)(a).appConfig.schemas.find(n=>n.name===e),d=(0,r.createContext)({user:void 0,setUser:()=>null}),s=()=>(0,r.useContext)(d).user,f=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.fields.filter(e=>"relation"===e.type&&e.relation||"file"===e.type).map(e=>{if(!e.relation)throw Error("Field ".concat(e.name," is relation type but has no relation field"));if((0,o.EC)(e.relation)&&"file"!==e.type)return null;let t=n.find(n=>{var t;return n.name===(null===(t=e.relation)||void 0===t?void 0:t.schema)});if(!t)throw Error("Schema ".concat(e.relation.schema," not found"));let r=["".concat(e.name,".id"),"".concat(e.name,".").concat(t.label_field)];return"file"===e.type&&r.push("".concat(e.name,".path"),"".concat(e.name,".type"),"".concat(e.name,".disk")),r.join(",")}).filter(Boolean):[]}},51919:function(e,n,t){t.d(n,{Hl:function(){return o}});let r={on(e,n){"undefined"!=typeof document&&document.addEventListener(e,e=>n(null==e?void 0:e.detail))},dispatch(e,n){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent(e,{detail:n}))},remove(e,n){"undefined"!=typeof document&&document.removeEventListener(e,n)}};n.ZP=r;let o=e=>{r.dispatch("network-error",e)}},27453:function(e,n,t){t.d(n,{Vp:function(){return i},h4:function(){return l},vU:function(){return a}});var r=t(18009);let o=(e,n)=>{(0,r.ZP)(e,{position:"top-center"})},i=(e,n)=>{r.ZP.success(e,{position:"top-center"})},a=(e,n)=>{r.ZP.error(e,{position:"top-center"})},l={info:o,success:i,error:a,warning:(e,n)=>{o(e,n)}}},84971:function(e,n,t){t.d(n,{HG:function(){return v},SO:function(){return f},dX:function(){return s},f1:function(){return d},qb:function(){return m}});var r=t(98955),o=t(33108),i=t(51919),a=t(27453);let l=(e,n)=>{let t=r.Z.get(o.B$),i={"Content-Type":"application/json;charset=utf-8",...null!=e?e:{}};return n instanceof FormData&&delete i["Content-Type"],t&&(i.Authorization="Bearer ".concat(t)),i},c=function(e){var n;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"==typeof e?e:null!==(n=e.message)&&void 0!==n?n:t},u=async(e,n,t,r)=>{var u,d,s,f;let m=null,v={method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:l(null!==(u=null==r?void 0:r.headers)&&void 0!==u?u:{},t),redirect:"follow",referrerPolicy:"strict-origin-when-cross-origin"};t&&(t instanceof FormData?v.body=t:v.body=JSON.stringify(t));try{if(n.startsWith("http://")||n.startsWith("https://")||(n=o.N9+n),!(m=await fetch(n,v)).ok){let e=null!==(s=m.statusText)&&void 0!==s?s:"Network response was not ok";try{let n=await m.json();e=c(n.error,e)}catch(e){}throw Error(e)}if(null===(d=m.headers.get("Content-Type"))||void 0===d||!d.includes("application/json"))return m;{let e=await m.json();if(e.error)throw Error(c(e.error));return null!==(f=e.data)&&void 0!==f?f:e}}catch(n){console.error(n);let e="";throw(null==r?void 0:r.disableErrorNotification)||a.h4.error(c(n.message,"An error occurred. Please try again later.")),n instanceof Error&&(e=n.message),e.includes("Failed to fetch")&&(0,i.Hl)("An error occurred. Please try again later."),Error(e)}},d=e=>{var n;let t=(null!==(n=e.message)&&void 0!==n?n:"").toLocaleLowerCase();return t.includes("401")||t.includes("unauthorized")},s=async(e,n)=>await u("GET",e,null,n),f=async(e,n,t)=>await u("POST",e,n,t),m=async(e,n,t)=>await u("PUT",e,n,t),v=async(e,n,t)=>await u("DELETE",e,n,t)},33108:function(e,n,t){t.d(n,{N9:function(){return s},B$:function(){return f},MJ:function(){return u},gk:function(){return a},aD:function(){return m}});var r,o,i=t(30248);let a=i.z.object({id:i.z.number()}),l=i.z.array(a),c=i.z.object({$nochange:i.z.boolean().optional(),$add:i.z.array(a).optional(),$clear:i.z.array(a).optional()}),u=i.z.union([l,c]);var d=t(49079);let s=null!==(r=d.env.NEXT_PUBLIC_API_BASE_URI)&&void 0!==r?r:"/api",f=null!==(o=d.env.NEXT_PUBLIC_COOKIE_NAME)&&void 0!==o?o:"token",m=["/login/","/register/","/activate/","/setup/"]},22169:function(e,n,t){t.d(n,{cn:function(){return i}});var r=t(75504),o=t(51367);function i(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,o.m6)((0,r.W)(n))}}}]);