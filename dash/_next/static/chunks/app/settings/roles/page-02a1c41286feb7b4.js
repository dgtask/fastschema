(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{78571:function(e,t,r){Promise.resolve().then(r.bind(r,95412))},95412:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(57437),a=r(8792),s=r(34560),i=r(15e3),l=r(75006),o=r(60834),c=r(30142),d=r(39997),u=r(27453),f=r(33277),m=r(90688),x=r(95453);let p=e=>[{accessorKey:"id",enableSorting:!0,enableHiding:!0,filterFn:c.i,header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"ID"})},cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsx)("span",{className:"w-[60px] truncate font-medium",children:t.getValue("id")})})}},{accessorKey:"name",enableSorting:!0,enableHiding:!0,filterFn:c.i,header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"Name"})},cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsx)("span",{className:"max-w-[500px] truncate font-medium",children:t.getValue("name")})})}},{accessorKey:"description",enableSorting:!0,enableHiding:!0,filterFn:c.i,header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"Description"})},cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex space-x-2",children:(0,n.jsx)("span",{className:"max-w-[500px] truncate font-medium",children:t.getValue("description")})})}},{accessorKey:"root",header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"Root"})},cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"w-[80px]",children:t.getValue("root")?(0,n.jsx)(f.C,{children:"Root"}):null})},filterFn:(e,t,r)=>r===e.getValue(t),enableSorting:!0,enableHiding:!0},{accessorKey:"type",header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"Type"})},cell:e=>{let{row:t}=e,r=[1,2,3].includes(t.getValue("id"))?(0,n.jsx)(f.C,{children:"System"}):(0,n.jsx)(f.C,{variant:"secondary",children:"User"});return(0,n.jsx)("div",{className:"w-[80px]",children:r})},filterFn:(e,t,r)=>r===e.getValue(t),enableSorting:!1,enableHiding:!0},{accessorKey:"created_at",filterFn:c.i,header:e=>{let{column:t}=e;return(0,n.jsx)(d.Q,{column:t,title:"Created at"})},cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{children:t.getValue("created_at")})},enableSorting:!0,enableHiding:!0},{id:"actions",cell:t=>{let{row:r}=t,s=r.original;return(0,n.jsxs)("div",{className:"flex h-5 items-center space-x-4 text-sm",children:[(0,n.jsx)(a.default,{href:"/settings/roles/edit?id=".concat(s.id),className:"cursor-pointer hover:underline",children:"Edit"}),![1,2,3].includes(s.id)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{orientation:"vertical"}),(0,n.jsx)("button",{className:"cursor-pointer hover:underline text-red-800",onClick:async()=>{if(confirm("Are you sure you want to delete this role: ".concat(s.name,"?")))try{await (0,m.Rd)(s.id),u.h4.success("Role ".concat(s.name," deleted")),await e()}catch(e){u.h4.error(e.message)}},children:"Delete"})]})]})}}];var h=r(57654),g=r(76540),v=r(70769),j=r(2265);function y(){var e,t;let{data:r,isLoading:c,error:d,refetch:u}=(0,g.a)({queryKey:["roles"],queryFn:m.xv}),f=p(u);return((0,j.useEffect)(()=>((0,s.D8)({title:"Roles list",description:"List of all roles.",breadcrumbs:[{name:"Settings",path:"/settings"},{name:"Roles",path:"/settings/roles"}],actions:[(0,n.jsx)(a.default,{href:"/settings/roles/edit",children:(0,n.jsx)(h.z,{size:"sm",icon:(0,n.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),children:"New Role"})},"create")]}),s.D8),[]),c)?(0,n.jsx)(l.g,{}):d?(0,n.jsx)(i.T,{error:d}):(0,n.jsx)(o.i,{data:r,columns:f,getRowId:e=>e.id.toString(),filterTitle:"Filter roles",pagination:{total:null!==(e=null==r?void 0:r.length)&&void 0!==e?e:0,current_page:1,per_page:10,last_page:Math.ceil((null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0)/10)}})}},57654:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var n=r(57437),a=r(79580),s=r(575);let i=(0,r(2265).forwardRef)((e,t)=>{let{loading:r,icon:i,children:l,disabled:o,...c}=e,d={type:"button",size:"sm",...c};return r?(0,n.jsxs)(s.z,{...d,ref:t,disabled:o||r,children:[(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),l]}):(0,n.jsx)(s.z,{...d,ref:t,disabled:o||r,children:i?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[i,l]}):l})});i.displayName="Button"},15e3:function(e,t,r){"use strict";r.d(t,{T:function(){return o}});var n=r(57437),a=r(29069),s=r(62985),i=r(95601),l=r.n(i);let o=e=>{var t;let{title:r,description:i,error:o}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:null!=r?r:"Error"})}),(0,n.jsxs)(a.bZ,{variant:"destructive",children:[(0,n.jsx)(s.Z,{size:16,className:"mr-2"}),(0,n.jsx)(a.Cd,{children:null!=r?r:"Error"}),(null==o?void 0:o.message)||i&&(0,n.jsx)(a.X,{children:null!==(t=null==o?void 0:o.message)&&void 0!==t?t:i})]})]})}},30142:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});let n=(e,t,r)=>String(e.getValue(t)).toLocaleLowerCase().includes(String(r).toLocaleLowerCase())},39997:function(e,t,r){"use strict";r.d(t,{Q:function(){return o}});var n=r(57437),a=r(62177),s=r(34645),i=r(22169),l=r(57654);function o(e){let{column:t,title:r,className:o}=e;if(!t.getCanSort())return(0,n.jsx)("div",{className:(0,i.cn)(o),children:r});let c=(0,n.jsx)(a.jnn,{className:"ml-2 h-4 w-4"});return"desc"===t.getIsSorted()&&(c=(0,n.jsx)(a.veu,{className:"ml-2 h-4 w-4"})),"asc"===t.getIsSorted()&&(c=(0,n.jsx)(a.Hf3,{className:"ml-2 h-4 w-4"})),(0,n.jsx)("div",{className:(0,i.cn)("flex items-center space-x-2",o),children:(0,n.jsxs)(s.h_,{children:[(0,n.jsx)(s.$F,{asChild:!0,children:(0,n.jsxs)(l.z,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[(0,n.jsx)("span",{children:r}),c]})}),(0,n.jsxs)(s.AW,{align:"start",children:[(0,n.jsxs)(s.Xi,{onClick:()=>t.toggleSorting(!1),children:[(0,n.jsx)(a.Hf3,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),(0,n.jsxs)(s.Xi,{onClick:()=>t.toggleSorting(!0),children:[(0,n.jsx)(a.veu,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),(0,n.jsx)(s.VD,{}),(0,n.jsxs)(s.Xi,{onClick:()=>t.toggleVisibility(!1),children:[(0,n.jsx)(a.L52,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})})}},34560:function(e,t,r){"use strict";r.d(t,{Sc:function(){return y},D8:function(){return j}});var n=r(57437),a=r(8792),s=r(13571),i=r.n(s),l=r(51919),o=r(2265),c=r(62177),d=r(59143),u=r(22169);let f=o.forwardRef((e,t)=>{let{...r}=e;return(0,n.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...r})});f.displayName="Breadcrumb";let m=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("ol",{ref:t,className:(0,u.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...a})});m.displayName="BreadcrumbList";let x=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("li",{ref:t,className:(0,u.cn)("inline-flex items-center gap-1.5",r),...a})});x.displayName="BreadcrumbItem";let p=o.forwardRef((e,t)=>{let{asChild:r,className:a,...s}=e,i=r?d.g7:"a";return(0,n.jsx)(i,{ref:t,className:(0,u.cn)("transition-colors hover:text-foreground",a),...s})});p.displayName="BreadcrumbLink";let h=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,u.cn)("font-normal text-foreground",r),...a})});h.displayName="BreadcrumbPage";let g=e=>{let{children:t,className:r,...a}=e;return(0,n.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,u.cn)("[&>svg]:size-3.5",r),...a,children:null!=t?t:(0,n.jsx)(c.XCv,{})})};g.displayName="BreadcrumbSeparator";let v={title:"",description:"",breadcrumbs:[],actions:[]},j=e=>{l.ZP.dispatch("pageInfo",null!=e?e:[])},y=()=>{var e,t;let[r,s]=(0,o.useState)(v);(0,o.useEffect)(()=>{l.ZP.on("pageInfo",e=>{s(null!=e?e:v)})},[]);let c=(null==r?void 0:null===(e=r.breadcrumbs)||void 0===e?void 0:e.length)?[{name:"Dash",path:"/"},...null!==(t=r.breadcrumbs)&&void 0!==t?t:[]]:[],d=c.length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("title",{children:r.title}),(0,n.jsx)(f,{children:(0,n.jsx)(m,{children:i()(c,e=>e.path).map((e,t)=>{let r=t===d-1;return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(x,{children:r?(0,n.jsx)(h,{children:e.name}):(0,n.jsx)(p,{asChild:!0,children:(0,n.jsx)(a.default,{href:e.path,children:e.name})})}),!r&&(0,n.jsx)(g,{})]},e.path)})})}),(r.title||r.description)&&(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2 w-full",children:[(0,n.jsxs)("div",{children:[r.title&&(0,n.jsx)("h1",{className:"text-lg font-semibold md:text-2xl",children:r.title}),r.description&&(0,n.jsx)("p",{className:"text-muted-foreground",children:r.description})]}),(0,n.jsx)("div",{className:"ml-auto mr-4 flex gap-2",children:r.actions})]})]})}},29069:function(e,t,r){"use strict";r.d(t,{Cd:function(){return c},X:function(){return d},bZ:function(){return o}});var n=r(57437),a=r(2265),s=r(57742),i=r(22169);let l=(0,s.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,...s}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),r),...s})});o.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...a})});d.displayName="AlertDescription"},33277:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(57437);r(2265);var a=r(57742),s=r(22169);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...a})}},575:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var n=r(57437),a=r(2265),s=r(59143),i=r(57742),l=r(22169);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},26739:function(e,t,r){"use strict";r.d(t,{di:function(){return x},e8:function(){return d},fu:function(){return f},mY:function(){return o},rb:function(){return u},sZ:function(){return c},zz:function(){return m}});var n=r(57437),a=r(2265),s=r(62177),i=r(9160),l=r(22169);r(9208);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.mY,{ref:t,className:(0,l.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});o.displayName=i.mY.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(s._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(i.mY.Input,{ref:t,className:(0,l.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});c.displayName=i.mY.Input.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.mY.List,{ref:t,className:(0,l.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});d.displayName=i.mY.List.displayName;let u=a.forwardRef((e,t)=>(0,n.jsx)(i.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=i.mY.Empty.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.mY.Group,{ref:t,className:(0,l.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});f.displayName=i.mY.Group.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.mY.Separator,{ref:t,className:(0,l.cn)("-mx-1 h-px bg-border",r),...a})});m.displayName=i.mY.Separator.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(i.mY.Item,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50",r),...a})});x.displayName=i.mY.Item.displayName},51919:function(e,t,r){"use strict";r.d(t,{Hl:function(){return a}});let n={on(e,t){"undefined"!=typeof document&&document.addEventListener(e,e=>t(null==e?void 0:e.detail))},dispatch(e,t){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){"undefined"!=typeof document&&document.removeEventListener(e,t)}};t.ZP=n;let a=e=>{n.dispatch("network-error",e)}},27453:function(e,t,r){"use strict";r.d(t,{Vp:function(){return s},h4:function(){return l},vU:function(){return i}});var n=r(18009);let a=(e,t)=>{(0,n.ZP)(e,{position:"top-center"})},s=(e,t)=>{n.ZP.success(e,{position:"top-center"})},i=(e,t)=>{n.ZP.error(e,{position:"top-center"})},l={info:a,success:s,error:i,warning:(e,t)=>{a(e,t)}}},84971:function(e,t,r){"use strict";r.d(t,{HG:function(){return x},SO:function(){return f},dX:function(){return u},f1:function(){return d},qb:function(){return m}});var n=r(98955),a=r(33108),s=r(51919),i=r(27453);let l=(e,t)=>{let r=n.Z.get(a.B$),s={"Content-Type":"application/json;charset=utf-8",...null!=e?e:{}};return t instanceof FormData&&delete s["Content-Type"],r&&(s.Authorization="Bearer ".concat(r)),s},o=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"string"==typeof e?e:null!==(t=e.message)&&void 0!==t?t:r},c=async(e,t,r,n)=>{var c,d,u,f;let m=null,x={method:e,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:l(null!==(c=null==n?void 0:n.headers)&&void 0!==c?c:{},r),redirect:"follow",referrerPolicy:"strict-origin-when-cross-origin"};r&&(r instanceof FormData?x.body=r:x.body=JSON.stringify(r));try{if(t.startsWith("http://")||t.startsWith("https://")||(t=a.N9+t),!(m=await fetch(t,x)).ok){let e=null!==(u=m.statusText)&&void 0!==u?u:"Network response was not ok";try{let t=await m.json();e=o(t.error,e)}catch(e){}throw Error(e)}if(null===(d=m.headers.get("Content-Type"))||void 0===d||!d.includes("application/json"))return m;{let e=await m.json();if(e.error)throw Error(o(e.error));return null!==(f=e.data)&&void 0!==f?f:e}}catch(t){console.error(t);let e="";throw(null==n?void 0:n.disableErrorNotification)||i.h4.error(o(t.message,"An error occurred. Please try again later.")),t instanceof Error&&(e=t.message),e.includes("Failed to fetch")&&(0,s.Hl)("An error occurred. Please try again later."),Error(e)}},d=e=>{var t;let r=(null!==(t=e.message)&&void 0!==t?t:"").toLocaleLowerCase();return r.includes("401")||r.includes("unauthorized")},u=async(e,t)=>await c("GET",e,null,t),f=async(e,t,r)=>await c("POST",e,t,r),m=async(e,t,r)=>await c("PUT",e,t,r),x=async(e,t,r)=>await c("DELETE",e,t,r)},90688:function(e,t,r){"use strict";r.d(t,{Rd:function(){return l},cY:function(){return s},jh:function(){return o},x$:function(){return i},xv:function(){return a}});var n=r(84971);let a=async()=>(0,n.dX)("/role"),s=async e=>{var t;if(!e)return null;let r=await (0,n.dX)("/role/".concat(e));return r.permissions=(null!==(t=r.permissions)&&void 0!==t?t:[]).map(e=>e.resource),r},i=async(e,t)=>(t||(delete e.$add,delete e.$clear),t?await (0,n.qb)("/role/".concat(t),e):await (0,n.SO)("/role",e)),l=e=>(0,n.HG)("/role/".concat(e)),o=async()=>d(c(await (0,n.dX)("/role/resources"))),c=e=>e.filter(e=>{var t;return!e.whitelist&&((null==e?void 0:null===(t=e.resources)||void 0===t?void 0:t.length)&&(e.resources=c(e.resources)),!0)}),d=e=>e.filter(e=>{var t,r;return(!e.group||null!=e&&null!==(t=e.resources)&&void 0!==t&&!!t.length)&&((null==e?void 0:null===(r=e.resources)||void 0===r?void 0:r.length)&&(e.resources=d(e.resources)),!0)})},33108:function(e,t,r){"use strict";r.d(t,{N9:function(){return u},B$:function(){return f},MJ:function(){return c},gk:function(){return i},aD:function(){return m}});var n,a,s=r(30248);let i=s.z.object({id:s.z.number()}),l=s.z.array(i),o=s.z.object({$nochange:s.z.boolean().optional(),$add:s.z.array(i).optional(),$clear:s.z.array(i).optional()}),c=s.z.union([l,o]);var d=r(49079);let u=null!==(n=d.env.NEXT_PUBLIC_API_BASE_URI)&&void 0!==n?n:"/api",f=null!==(a=d.env.NEXT_PUBLIC_COOKIE_NAME)&&void 0!==a?a:"token",m=["/login/","/register/","/activate/","/setup/"]},22169:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(75504),a=r(51367);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}},function(e){e.O(0,[310,637,792,872,571,32,732,998,160,156,408,834,971,69,744],function(){return e(e.s=78571)}),_N_E=e.O()}]);